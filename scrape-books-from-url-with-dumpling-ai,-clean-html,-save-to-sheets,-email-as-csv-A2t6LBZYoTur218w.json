{
  "updatedAt": "2025-11-12T10:41:33.000Z",
  "createdAt": "2025-10-21T09:33:17.378Z",
  "id": "A2t6LBZYoTur218w",
  "name": "Scrape Books from URL with Dumpling AI, Clean HTML, Save to Sheets, Email as CSV",
  "active": false,
  "isArchived": true,
  "nodes": [
    {
      "parameters": {
        "options": {}
      },
      "id": "be8f92a7-7bac-41f2-a17f-72765119025d",
      "name": "Convert to CSV File",
      "type": "n8n-nodes-base.convertToFile",
      "position": [
        1312,
        496
      ],
      "typeVersion": 1.1
    },
    {
      "parameters": {
        "operation": "extractHtmlContent",
        "dataPropertyName": "content",
        "extractionValues": {
          "values": [
            {
              "key": "books",
              "cssSelector": ".row > li",
              "returnValue": "html",
              "returnArray": true
            }
          ]
        },
        "options": {}
      },
      "id": "a21e830d-8457-4eac-83d5-5ab17c1ccba0",
      "name": "Extract all books from the page",
      "type": "n8n-nodes-base.html",
      "position": [
        432,
        496
      ],
      "typeVersion": 1.2
    },
    {
      "parameters": {
        "sortFieldsUi": {
          "sortField": [
            {
              "fieldName": "price",
              "order": "descending"
            }
          ]
        },
        "options": {}
      },
      "id": "08e584f3-307d-49bd-a0ac-3e76e41fc739",
      "name": "Sort by price",
      "type": "n8n-nodes-base.sort",
      "position": [
        1088,
        496
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "operation": "extractHtmlContent",
        "dataPropertyName": "books",
        "extractionValues": {
          "values": [
            {
              "key": "title",
              "cssSelector": "h3 > a",
              "returnValue": "attribute",
              "attribute": "title"
            },
            {
              "key": "price",
              "cssSelector": ".price_color"
            }
          ]
        },
        "options": {}
      },
      "id": "845a2fc5-bea3-4502-95cb-0fd641b659ff",
      "name": "Extract individual book price",
      "type": "n8n-nodes-base.html",
      "position": [
        880,
        496
      ],
      "typeVersion": 1.2
    },
    {
      "parameters": {
        "subject": "bookstore csv",
        "emailType": "text",
        "message": "Hey, here's the scraped data from the online bookstore!",
        "options": {
          "attachmentsUi": {
            "attachmentsBinary": [
              {}
            ]
          }
        }
      },
      "id": "d618ba9b-063b-4610-ae88-fccfc10f1005",
      "name": "Send CSV via e-mail",
      "type": "n8n-nodes-base.gmail",
      "position": [
        1536,
        496
      ],
      "webhookId": "40f2d609-52ed-40bf-b190-1f1cebbe3fb7",
      "typeVersion": 2.1
    },
    {
      "parameters": {
        "content": "### Scrape Books from URL with Dumpling AI, Clean HTML, Save to Sheets, Email as CSV\n\nðŸ“Œ This workflow scrapes book data from a website, turns it into a CSV, saves it, and sends it by email.\n\nðŸ”§ It starts from a Google Sheets trigger, fetches the page using DumplingAI, extracts books, sorts by price, and emails the CSV.\n\nâœ… Make sure APIs for Gmail, Sheets & Drive are enabled in Google Cloud. Update the URL in the \"Fetch website content\" node.\n",
        "height": 297,
        "width": 619
      },
      "id": "e33aab15-0513-44d6-a5f5-52f37e9c5941",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -192,
        -112
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "### ðŸ” Trigger to Raw Book HTML\n\n1. **Google Sheets Trigger**  \n   Watches a sheet for new row entries. Once a new URL is added, the workflow starts.\n\n2. **Fetch Website Content (Dumpling AI)**  \n   Makes an HTTP POST request to Dumpling AI to scrape and return the full HTML of the target URL.\n\n3. **Extract All Books**  \n   Uses CSS selectors to isolate the list items (`li.row > li`) containing book entries.\n\n4. **Split Out Node**  \n   Breaks the array of book HTML blocks into individual items, so each book can be processed separately in the next steps.\n",
        "height": 300,
        "width": 900,
        "color": 4
      },
      "id": "000180ce-7b6f-48ed-84ef-6fe3e0113c82",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -192,
        208
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "### ðŸ“¦ Parse, Sort, Export & Email\n\n5. **Extract Individual Book Data**  \n   From each book, extract the title (`<h3>a` title attribute) and price (`.price_color` content).\n\n6. **Sort by Price**  \n   Organizes the extracted data in descending order using the price field.\n\n7. **Convert to CSV File**  \n   Transforms the sorted JSON data into a downloadable CSV file format.\n\n8. **Send CSV via Gmail**  \n   Automatically sends an email with the CSV file attached to the predefined address.\n",
        "height": 300,
        "width": 840,
        "color": 6
      },
      "id": "2efd62fa-3dd1-45ac-b6df-16d22b6fba05",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        816,
        208
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "pollTimes": {
          "item": [
            {
              "mode": "everyMinute"
            }
          ]
        },
        "documentId": {
          "__rl": true,
          "mode": "list",
          "value": "",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1pb4WLqv2EruLM1z9-utehcINolSj0vlUqZionyLoRUs/edit?usp=drivesdk",
          "cachedResultName": "URLs"
        },
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": "",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1pb4WLqv2EruLM1z9-utehcINolSj0vlUqZionyLoRUs/edit#gid=0",
          "cachedResultName": "Sheet1"
        },
        "event": "rowAdded",
        "options": {}
      },
      "id": "c551bbad-34fe-48a3-a184-1c1f31b624b6",
      "name": "Trigger- Watches For new URL in Spreadsheet",
      "type": "n8n-nodes-base.googleSheetsTrigger",
      "position": [
        -16,
        496
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://app.dumplingai.com/api/v1/scrape",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"url\": \"{{ $('Trigger- Watches For new URL in Spreadsheet')}}\", \n  \"format\": \"html\",\n  \"cleaned\": \"True\"\n  }",
        "options": {
          "allowUnauthorizedCerts": true
        }
      },
      "id": "f1338086-60ea-4135-b289-cf3e2a932e51",
      "name": "Scrape Website Content with Dumpling AI",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        208,
        496
      ],
      "typeVersion": 4.1
    },
    {
      "parameters": {
        "fieldToSplitOut": "books",
        "options": {}
      },
      "id": "0d1818d1-0cdd-4dad-a8dc-d615708b6856",
      "name": "Split HTML Array into Individual Books",
      "type": "n8n-nodes-base.splitOut",
      "position": [
        656,
        496
      ],
      "typeVersion": 1
    }
  ],
  "connections": {
    "Sort by price": {
      "main": [
        [
          {
            "node": "Convert to CSV File",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Convert to CSV File": {
      "main": [
        [
          {
            "node": "Send CSV via e-mail",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract individual book price": {
      "main": [
        [
          {
            "node": "Sort by price",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract all books from the page": {
      "main": [
        [
          {
            "node": "Split HTML Array into Individual Books",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split HTML Array into Individual Books": {
      "main": [
        [
          {
            "node": "Extract individual book price",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Scrape Website Content with Dumpling AI": {
      "main": [
        [
          {
            "node": "Extract all books from the page",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Trigger- Watches For new URL in Spreadsheet": {
      "main": [
        [
          {
            "node": "Scrape Website Content with Dumpling AI",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": null,
  "pinData": {},
  "versionId": "6a3c4fae-2594-4678-90f0-287b5642f04b",
  "activeVersionId": null,
  "triggerCount": 0,
  "shared": [
    {
      "updatedAt": "2025-10-21T09:33:17.393Z",
      "createdAt": "2025-10-21T09:33:17.393Z",
      "role": "workflow:owner",
      "workflowId": "A2t6LBZYoTur218w",
      "projectId": "HHopAZ4lOFgjhBzT"
    }
  ],
  "activeVersion": null,
  "tags": []
}