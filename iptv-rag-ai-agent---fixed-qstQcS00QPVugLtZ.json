{
  "updatedAt": "2025-12-14T22:41:07.000Z",
  "createdAt": "2025-12-11T20:35:16.372Z",
  "id": "qstQcS00QPVugLtZ",
  "name": "IPTV RAG AI Agent - FIXED",
  "active": false,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "mode": "insert",
        "pineconeIndex": {
          "__rl": true,
          "value": "ip",
          "mode": "list",
          "cachedResultName": "ip"
        },
        "embeddingBatchSize": 2,
        "options": {
          "pineconeNamespace": "={{ $json.File_Name }}"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "typeVersion": 1.3,
      "position": [
        -912,
        1328
      ],
      "id": "265a118f-3ffb-4056-a858-df7acbce594f",
      "name": "Pinecone Vector Store",
      "credentials": {
        "pineconeApi": {
          "id": "akk9g6AgLQCV8UCq",
          "name": "IP-T"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        -1072,
        1584
      ],
      "id": "36258ed4-1d60-45cf-8825-45c4babff447",
      "name": "Embeddings OpenAI",
      "credentials": {
        "openAiApi": {
          "id": "KgsXR5Ga5dON4Aie",
          "name": "SEO"
        }
      }
    },
    {
      "parameters": {
        "dataType": "binary",
        "textSplittingMode": "custom",
        "options": {
          "metadata": {
            "metadataValues": [
              {
                "name": "Apple_Report",
                "value": "={{ $json.name }}"
              }
            ]
          }
        }
      },
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1.1,
      "position": [
        -912,
        1504
      ],
      "id": "578ade38-fd5b-4082-84fd-d81c463323dd",
      "name": "Default Data Loader"
    },
    {
      "parameters": {
        "content": "# RAG Chatbot\n",
        "height": 892,
        "width": 1414,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -352,
        1152
      ],
      "id": "6ac1fb48-2ce2-4d9c-8533-5feabb71e6a2",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "pineconeIndex": {
          "__rl": true,
          "value": "ip",
          "mode": "list",
          "cachedResultName": "ip"
        },
        "options": {
          "pineconeNamespace": "={{ $json.File_Name }}"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "typeVersion": 1.3,
      "position": [
        112,
        1712
      ],
      "id": "2fd2ab3c-6a02-40b2-a83f-34744a94ba96",
      "name": "Pinecone Vector Store1",
      "credentials": {
        "pineconeApi": {
          "id": "akk9g6AgLQCV8UCq",
          "name": "IP-T"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        496,
        1888
      ],
      "id": "73d26a57-1384-4a75-affe-62c25edde66f",
      "name": "Embeddings OpenAI1",
      "credentials": {
        "openAiApi": {
          "id": "KgsXR5Ga5dON4Aie",
          "name": "SEO"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -1152,
        1248
      ],
      "id": "654e3f66-e825-402d-aa05-e0701054cf65",
      "name": "Loop Over Items"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
      "typeVersion": 1,
      "position": [
        -816,
        1648
      ],
      "id": "be1ef983-f92d-48f3-88c8-f03faa3ab336",
      "name": "Recursive Character Text Splitter"
    },
    {
      "parameters": {
        "content": "# Uploading to VD\n",
        "height": 636,
        "width": 828
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1280,
        1168
      ],
      "id": "0d17cb1f-ba83-4080-94a0-60f097beaaa6",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "formTitle": "Form Submission",
        "formFields": {
          "values": [
            {
              "fieldLabel": "PDF File",
              "fieldType": "file",
              "acceptFileTypes": "pdf",
              "requiredField": true
            }
          ]
        },
        "options": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.formTrigger",
      "typeVersion": 2.3,
      "position": [
        -1248,
        1424
      ],
      "id": "2c796112-1329-4d4e-837a-36afd6303b1b",
      "name": "On form submission",
      "webhookId": "c86e4e3f-c902-43b3-9470-0a57786722e1"
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolDescription": "git data\n",
        "pineconeIndex": {
          "__rl": true,
          "value": "ip",
          "mode": "list",
          "cachedResultName": "ip"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "typeVersion": 1.3,
      "position": [
        560,
        1696
      ],
      "id": "70d03c0c-8aa8-4311-9030-a56bb3ac519b",
      "name": "Pinecone Vector Store2",
      "credentials": {
        "pineconeApi": {
          "id": "akk9g6AgLQCV8UCq",
          "name": "IP-T"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "2f35809b-3889-4ef7-a8d5-a4d934842631",
              "name": "Text",
              "value": "={{ $json.message.text }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -128,
        544
      ],
      "id": "bcc21d3a-546b-4f06-b0e3-0810eedd711a",
      "name": "Text"
    },
    {
      "parameters": {
        "updates": [
          "message"
        ],
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1.2,
      "position": [
        -288,
        544
      ],
      "id": "ef4ce71e-76cf-4cad-a5a8-f12211e2fba5",
      "name": "Telegram Trigger1",
      "webhookId": "29baba86-48b1-4f93-af3b-2a96e7cd47b1",
      "credentials": {
        "telegramApi": {
          "id": "4Zx2OD8qIls5skix",
          "name": "Telegram NGRK MG"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger1').item.json.message.chat.id }}",
        "text": "={{ $json.output }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        464,
        544
      ],
      "id": "f9eda402-5722-405c-98c0-4f4581c80abc",
      "name": "Send a text message",
      "webhookId": "e4bed5dc-7fed-4211-992c-df8039755f26",
      "credentials": {
        "telegramApi": {
          "id": "4Zx2OD8qIls5skix",
          "name": "Telegram NGRK MG"
        }
      }
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $('Telegram Trigger1').item.json.message.chat.id }}",
        "contextWindowLength": 50
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        768,
        1328
      ],
      "id": "3d0b2a99-5ab7-41ae-aba9-0db0214022d5",
      "name": "Parent Memory"
    },
    {
      "parameters": {
        "content": "# Inputs\n",
        "height": 768,
        "width": 992
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -352,
        144
      ],
      "typeVersion": 1,
      "id": "9bb47502-daaa-4903-affd-e43775c3914e",
      "name": "Sticky Note7"
    },
    {
      "parameters": {
        "text": "={{ $json.query || $('Telegram Trigger1').item.json.message.text }}",
        "options": {
          "systemMessage": "You are IPTV Support AI, a professional customer assistant for an IPTV subscription service. Your job is to answer only using the information from the provided knowledge base (RAG PDF). If an answer is NOT available in the knowledge base, say: This information is not available in the system."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agentTool",
      "typeVersion": 2.2,
      "position": [
        256,
        1216
      ],
      "id": "c41f8288-75c0-4cbf-bcd6-f9ff707d3491",
      "name": "AI Agent Tool"
    },
    {
      "parameters": {
        "endpointUrl": "http://localhost:5678/mcp/RAG",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.mcpClientTool",
      "typeVersion": 1.2,
      "position": [
        448,
        1456
      ],
      "id": "ee0d715c-ab13-487d-85b5-e5439703d8a7",
      "name": "MCP Client"
    },
    {
      "parameters": {
        "path": "RAG"
      },
      "type": "@n8n/n8n-nodes-langchain.mcpTrigger",
      "typeVersion": 2,
      "position": [
        720,
        1456
      ],
      "id": "e68badf4-0761-469a-8cae-e790aa63a2eb",
      "name": "MCP Server Trigger",
      "webhookId": "7b9ce414-704c-455e-b079-ecf9326383c5"
    },
    {
      "parameters": {
        "endpointUrl": "http://localhost:5678/mcp/free_trail",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.mcpClientTool",
      "typeVersion": 1.2,
      "position": [
        1472,
        1632
      ],
      "id": "125e6721-8eb1-432e-8819-0b5da5f682b4",
      "name": "MCP Client1"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1EzVNcpb5Ls-R-rUtNHE1v5LcTplUAuwQcQbjqjS1gUY",
          "mode": "list",
          "cachedResultName": "Enigma telegram"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "WhatsApp",
              "lookupValue": "={{ $json.WhatsApp }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        2000,
        1712
      ],
      "id": "e84df0c8-253e-4626-a5d2-5dda0e59b0f0",
      "name": "Read User Record",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "jToedYDz95w6z3tL",
          "name": "Google Sheets account 5"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1EzVNcpb5Ls-R-rUtNHE1v5LcTplUAuwQcQbjqjS1gUY",
          "mode": "list",
          "cachedResultName": "Enigma telegram"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "WhatsApp": "={{ $json.WhatsApp }}",
            "Country": "={{ $json.Country }}",
            "Device": "={{ $json.Device }}",
            "App": "={{ $json.App }}",
            "Category": "={{ $json.Category }}",
            "FreeTrialCount": "={{ $json.newTrialCount }}",
            "LastTrialDate": "={{ $now.format('yyyy-MM-dd HH:mm:ss') }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "WhatsApp",
              "displayName": "WhatsApp",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Country",
              "displayName": "Country",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Device",
              "displayName": "Device",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "App",
              "displayName": "App",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Category",
              "displayName": "Category",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "FreeTrialCount",
              "displayName": "FreeTrialCount",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "LastTrialDate",
              "displayName": "LastTrialDate",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        2448,
        1600
      ],
      "id": "0b993149-aa48-48dd-88c6-548816194c89",
      "name": "Append Trial Log",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "jToedYDz95w6z3tL",
          "name": "Google Sheets account 5"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini"
        },
        "builtInTools": {},
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.3,
      "position": [
        -64,
        1440
      ],
      "id": "aa42980e-1387-44a9-b6d4-a4228a3ba491",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "KgsXR5Ga5dON4Aie",
          "name": "SEO"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $('Telegram Trigger1').item.json.message.text }}",
        "needsFallback": true,
        "options": {
          "systemMessage": "You are Enigma+, the official AI assistant for iptvs-subscription.com. You manage RAG queries, Free Trials (max 2 per user), and Subscriptions using MCP tools."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        96,
        544
      ],
      "id": "40f158c8-8a98-4fc5-a257-990ce2d0700f",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "content": "##  Subscription\n",
        "height": 784,
        "width": 1088,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        720,
        144
      ],
      "typeVersion": 1,
      "id": "c3efcbc9-b913-4b2e-846e-e9b5854c66b9",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "path": "Subscription"
      },
      "type": "@n8n/n8n-nodes-langchain.mcpTrigger",
      "typeVersion": 2,
      "position": [
        1424,
        384
      ],
      "id": "3af44e61-014f-4711-9c29-f277e027250f",
      "name": "MCP Service Subscription",
      "webhookId": "7b9ce414-704c-455e-b079-ecf9326383c6"
    },
    {
      "parameters": {
        "endpointUrl": "http://localhost:5678/mcp/Subscription",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.mcpClientTool",
      "typeVersion": 1.2,
      "position": [
        1248,
        496
      ],
      "id": "a2a0c448-73d0-4582-a734-8336641bbbe0",
      "name": "Subscription"
    },
    {
      "parameters": {
        "text": "={{ $json.query || '' }}",
        "options": {
          "systemMessage": "You are Enigma+ IPTV Subscription Assistant. Collect: WhatsApp, Plan, Adult content, Device, MAC (if needed), Payment method, Privacy acknowledgment."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agentTool",
      "typeVersion": 2.2,
      "position": [
        880,
        352
      ],
      "id": "cc75d573-753b-4658-a9eb-8eb69f1181bc",
      "name": "Subscription1"
    },
    {
      "parameters": {
        "content": "# FREE TRAIL\n",
        "height": 860,
        "width": 1414,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1088,
        1152
      ],
      "id": "a7073afe-b05b-48fb-91ab-60cafb09897b",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "path": "free_trail"
      },
      "type": "@n8n/n8n-nodes-langchain.mcpTrigger",
      "typeVersion": 2,
      "position": [
        1760,
        1360
      ],
      "id": "034bd23f-575d-401f-97d0-9400fe1ba514",
      "name": "MCP FREE TRAIL",
      "webhookId": "7b9ce414-704c-455e-b079-ecf9326383c7"
    },
    {
      "parameters": {
        "text": "={{ $json.query || '' }}",
        "options": {
          "systemMessage": "You are the Free Trial handler for Enigma+ IPTV Service. Process free trial requests by collecting user data and validating eligibility."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agentTool",
      "typeVersion": 2.2,
      "position": [
        1280,
        1456
      ],
      "id": "a334cdf6-233a-4e4f-8bd3-c93486e227b8",
      "name": "AI Agent FREE TRAIL"
    },
    {
      "parameters": {
        "jsCode": "const data = $input.item.json;\nif (!data.WhatsApp) {\n  throw new Error('WhatsApp number is required');\n}\nconst whatsappRegex = /^\\+?\\d{6,15}$/;\nif (!whatsappRegex.test(data.WhatsApp)) {\n  throw new Error('Invalid WhatsApp format');\n}\nconst required = ['Country', 'Device', 'App', 'Category'];\nfor (const field of required) {\n  if (!data[field]) {\n    throw new Error('Missing required field: ' + field);\n  }\n}\nreturn $input.all();"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1808,
        1600
      ],
      "id": "f06cd619-7b08-4a6c-a6b9-d645e544eefb",
      "name": "Validate Input Data"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "trial-count-check",
              "leftValue": "={{ $json.FreeTrialCount || 0 }}",
              "rightValue": "2",
              "operator": {
                "type": "number",
                "operation": "lt"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        2208,
        1712
      ],
      "id": "bcb294a8-9f97-452d-b34f-eb8d428fd5d9",
      "name": "Check Trial Limit"
    },
    {
      "parameters": {
        "jsCode": "const currentCount = $input.item.json.FreeTrialCount || 0;\nconst newCount = currentCount + 1;\nreturn [{\n  json: {\n    ...$input.item.json,\n    newTrialCount: newCount,\n    timestamp: new Date().toISOString()\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2336,
        1600
      ],
      "id": "6c8d59ee-dcd0-46e4-bd77-324eae026b85",
      "name": "Increment Trial Count"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "error-response",
              "name": "error",
              "value": "You have already used the maximum of 2 free trials. You may subscribe to continue.",
              "type": "string"
            },
            {
              "id": "status",
              "name": "status",
              "value": "limit_reached",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2336,
        1808
      ],
      "id": "4b0bdfaf-a737-46c0-9857-701f735341de",
      "name": "Trial Limit Reached"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "success-message",
              "name": "message",
              "value": "Your free trial is being processed. You will receive activation shortly.",
              "type": "string"
            },
            {
              "id": "success-status",
              "name": "status",
              "value": "success",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2576,
        1600
      ],
      "id": "86088268-85c8-4dab-af1e-7f6b1fb1cf10",
      "name": "Success Response"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -240,
        992
      ],
      "id": "cc3052e0-8bda-41f0-8b63-8a4502fe4f48",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "b0wvg7uwnpHSARNL",
          "name": "cha."
        }
      }
    }
  ],
  "connections": {
    "Embeddings OpenAI": {
      "ai_embedding": [
        [
          {
            "node": "Pinecone Vector Store",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader": {
      "ai_document": [
        [
          {
            "node": "Pinecone Vector Store",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI1": {
      "ai_embedding": [
        [
          {
            "node": "Pinecone Vector Store1",
            "type": "ai_embedding",
            "index": 0
          },
          {
            "node": "Pinecone Vector Store2",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Recursive Character Text Splitter": {
      "ai_textSplitter": [
        [
          {
            "node": "Default Data Loader",
            "type": "ai_textSplitter",
            "index": 0
          }
        ]
      ]
    },
    "On form submission": {
      "main": [
        [
          {
            "node": "Pinecone Vector Store",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Pinecone Vector Store2": {
      "ai_tool": [
        [
          {
            "node": "MCP Server Trigger",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Text": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Telegram Trigger1": {
      "main": [
        [
          {
            "node": "Text",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Parent Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent FREE TRAIL",
            "type": "ai_memory",
            "index": 0
          },
          {
            "node": "AI Agent Tool",
            "type": "ai_memory",
            "index": 0
          },
          {
            "node": "Subscription1",
            "type": "ai_memory",
            "index": 0
          },
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent Tool": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "MCP Client": {
      "ai_tool": [
        [
          {
            "node": "AI Agent Tool",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "MCP Client1": {
      "ai_tool": [
        [
          {
            "node": "AI Agent FREE TRAIL",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent Tool",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "AI Agent FREE TRAIL",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "Subscription1",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Send a text message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Subscription": {
      "ai_tool": [
        [
          {
            "node": "Subscription1",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Subscription1": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent FREE TRAIL": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Validate Input Data": {
      "main": [
        [
          {
            "node": "Read User Record",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Read User Record": {
      "main": [
        [
          {
            "node": "Check Trial Limit",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Trial Limit": {
      "main": [
        [
          {
            "node": "Increment Trial Count",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Trial Limit Reached",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Increment Trial Count": {
      "main": [
        [
          {
            "node": "Append Trial Log",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Append Trial Log": {
      "main": [
        [
          {
            "node": "Success Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 1
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {},
  "versionId": "17ef791e-2959-4a03-866f-5b7441e96125",
  "activeVersionId": null,
  "triggerCount": 5,
  "shared": [
    {
      "updatedAt": "2025-12-11T20:35:16.395Z",
      "createdAt": "2025-12-11T20:35:16.395Z",
      "role": "workflow:owner",
      "workflowId": "qstQcS00QPVugLtZ",
      "projectId": "HHopAZ4lOFgjhBzT"
    }
  ],
  "activeVersion": null,
  "tags": []
}